<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title>todo</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" href="/favicon.ico">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-4 col-md-offset-4">
          <div id="target"></div>
        </div>
      </div>
    </div>

    <script src="bower_components/react/react.js"></script>
    <script src="bower_components/react/JSXTransformer.js"></script>
    <script type="text/jsx">
      var Main = React.createClass({
        getInitialState: function() {
          return {
            tasks:["Learn react", "Learn ASP MVC", "Keep studing grails"],
            taskInputText:""
          }
        },

        handleAddNewTask: function(task) {
          var tasks = this.state.tasks.push(task)
          //this.setState({tasks:tasks})//error here
          console.log(task, this.state.tasks)//its working, yahooo!!
        },

        render: function() {
          return (
            <div>
              <h1>MyTodoList</h1>
              <Form addNewTask={this.handleAddNewTask} />
              <List tasks={this.state.tasks} />
            </div>
          )
        }
      })

      var Form = React.createClass({
        handleSubmit: function(e) {
          e.preventDefault()

          var task = this.refs.task.getDOMNode().value.trim()

          if (task) {
            this.props.addNewTask(task)
          }
        },

        render: function() {
          return (
            <form onSubmit={this.handleSubmit}>
              <div className="form-group">
                <input ref="task" className="form-control" placeholder="Todo task..." />
              </div>

              <input type="submit" value="Add new task" className="btn btn-primary" />
            </form>
          )
        }
      })

      var List = React.createClass({
        render: function() {
          return (
            <table className="table">
              <thead>
                <th>Task</th>
                <th width="1"></th>
              </thead>
              <tbody>
                {this.props.tasks.map(function(task, index) {
                  return (
                    <tr>
                      <td>{task}</td>
                      <td>
                        <a key={index}>Show</a>
                      </td>
                    </tr>
                  )
                })}
              </tbody>
            </table>
          )
        }
      })

      React.render(<Main />, document.getElementById("target"))
    </script>
  </body>
</html>
